<!DOCTYPE html>
<html>
<head>
  <!-- Autogenerated by crystal-cover <%= Coverage::VERSION %> -->
  <title>Coverage of <%=@file.filename%></title>
  <meta charset="UTF-8">
  <style>
    html, body {
      margin: 0;
      font-family: 'Helvetica Neue', 'Arial', sans-serif;
    }

    section {
      max-width: 1024px;
      margin: auto;
    }

    .covered-code {
      background-color: #333;
      color: white;
      padding: 0.25em 1em;
    }

    .line-number, pre {
      font-size: 1rem;
      font-family: 'Courier', 'FreeMono', monospace;
    }

    .line-number {
      margin: 0;
      padding: 0;

      color: #eee;

      float:left;
      height: 1.25em;
      width: 4em;
      border-right: solid 1px white;
      margin-right: 0.5em;

      cursor: default;
    }

    pre.irrelevant-line {
      opacity: 0.9;
    }

    pre.relevant-line{
      background-color: #733;
    }

    pre.relevant-line.covered{
      background-color: #373;
    }

    .hit-count {
      position: absolute;
      padding: 0.3rem;
      font-size: 0.5rem;
      right: 0;
      top: 0;
      background: #ccc;
      color: black;
      min-width: 30px;
      text-align: center;
      opacity: 0.2;
      cursor: default;
    }

    .line {
      position: relative;
    }

    .line:hover .hit-count {
      opacity: 1;
    }

    .line:hover pre {
      background-color: #337;
    }

    pre {
      margin: 0;
      padding: 0;

      height: 1.25em;
      padding-left: 10px;
    }
  </style>
</head>
<body>
  <section id="general-coverage">
    <h1>Cover for <%= @file.filename %></h1>
    <hr>
    <table class="cover-table">
      <thead>
        <th>Hitted lines</th>
        <th>Relevant lines</th>
        <th>Percentage</th>
      </thead>
      <tbody>
        <tr>
          <td><%=@file.relevant_lines%></td>
          <td><%=@file.covered_lines%></td>
          <td class="low"><%=@file.percent_coverage_str%></td>
        </tr>
      </tbody>
    </table>
  </section>
  <section id="detailed-coverage">
    <hr>
    <div class="covered-code">
      <%-  @file.lines.each_with_index do | (line_content, hit_count), idx| -%>
        <div class="line">
          <div class="line-number"><%=idx+1%></div>
          <%- unless hit_count.nil? -%>
          <div class="hit-count"><%= hit_count %></div>
          <%- end -%>
          <pre class="<%= hit_count.nil? ? "irrelevant-line" : "relevant-line" %> <%= (!hit_count.nil? && hit_count > 0) ? "covered" : "" %>"><%= HTML.escape(line_content) %></pre>
        </div>
      <%- end -%>
    </div>
  </section>
</body>
</html>
